<% pages.each do |page| %>
<%# page.has_children? ? 'treeview__branch js-treeview-branch' : 'treeview__leaf' %>
  <li class="treeview__element js-treeview-element" data-id="<%= page.id %>" data-parent="<%= page.parent_id %>">
    <div class="d-flex align-items-center treeview__label border-bottom p-1">
      <%= link_to children_admin_communication_website_page_path(website_id: page.website.id, id: page.id),
                  class: 'js-treeview-openzone d-inline-block p-2 ps-0', style: 'width: 22px', remote: true do %>
        <% icon_style = page.has_children? ? 'fas' : 'far' %>
        <span class="open_btn"><i class="<%= icon_style %> fa-folder"></i></span>
        <span class="close_btn"><i class="<%= icon_style %> fa-folder-open"></i></span>
      <% end %>
      <%= link_to page, admin_communication_website_page_path(website_id: page.website.id, id: page.id) %>
      <span class="move_btn py-2 ps-2"><i class="fas fa-sort"></i></span>
    </div>
    <ul class="list-unstyled treeview__children js-treeview-children js-treeview-sortable-container ms-4" data-id="<%= page.id %>">
      <li class="treeview__empty">
        <div class="d-flex align-items-center treeview__label border-bottom p-1">
          <span class="p-2 ps-0"><%= t('empty_folder') %></span>
        </div>
      </li>
      <li class="treeview__loading"><%= t('loading') %></li>
    </ul>
  </li>
<% end %>
