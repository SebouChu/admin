<%
width, height = @blob.metadata.values_at('width', 'height')
ratio = width.present? && height.present? ? (width.to_f / height.to_f) : nil
university = University.find_by(id: @blob.university_id)
base_url = university&.url || ""
media_endpoint_path = medium_path(signed_id: @blob.signed_id, filename_with_transformations: @blob.filename)
%>
<%# TODO: Replace @blob.url with the media endpoint when it's ready %>
<%= raw({
  "name" => @blob.filename.to_s,
  "size" => @blob.byte_size,
  "width" => width,
  "height" => height,
  "ratio" => ratio,
  "url" => "#{base_url}#{media_endpoint_path}",
  "direct_url" => @blob.url
}.compact.to_yaml) %>
