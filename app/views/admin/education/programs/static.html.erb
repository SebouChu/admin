---
<% teacher_involvements = @program.university_person_involvements.includes(:person).ordered_by_name %>
<% administrator_involvements = @program.involvements_through_roles.includes(:person).ordered_by_name %>
title: >
  <%= @program.name %>
url: /<%= @website.structure.education_programs_path %><%= @program.path %>/
description: >
  <%= prepare_text_for_static @program.description %>
position: <%= @program.position %>
<% if @program.best_featured_image.attached? %>
image: "<%= @program.best_featured_image.blob.id %>"
image_alt: "<%= @program.featured_image_alt %>"
<% end %>
category: "<%= @website.categories.find_by(program_id: @program.id)&.path %>/"
teachers:
<% teacher_involvements.each do |involvement| %>
  - "<%= involvement.person.slug %>"
<% end %>
teachers_description:
<% teacher_involvements.each do |involvement| %>
  "<%= involvement.person.slug %>": >
    <%= involvement.description %>
<% end %>
<% if administrator_involvements.any? %>
administrators:
<% administrator_involvements.each do |involvement| %>
  - "<%= involvement.person.slug %>"
<% end %>
administrators_description:
<% administrator_involvements.each do |involvement| %>
  "<%= involvement.person.slug %>": >
    <%= involvement.target.to_s %>
<% end %>
roles:
<% @program.university_roles.ordered.each do |role| %>
  - title: >
      <%= role.to_s %>
    persons:
    <% role.involvements.includes(:person).ordered.each do |involvement| %>
      - "<%= involvement.person.slug %>"
    <% end %>
<% end %>
<% else %>
roles: []
<% end %>
continuing: <%= @program.continuing %>
level: <%= @program.level %>
ects: <%= @program.ects %>
<%
[
  :accessibility,
  :contacts,
  :duration,
  :evaluation,
  :objectives,
  :opportunities,
  :other,
  :prerequisites,
  :pricing,
  :registration,
  :results,
  :content
].each do |property| %>
<%= property.to_s %>: >
  <%= prepare_html_for_static @program.send("best_#{property}"), @program.university %>
<% end %>
---
