<% content_for :title, @program %>

<div class="row">

  <div class="col-md-3">
    <div class="card flex-fill w-100">
      <div class="card-header">
        <h2 class="card-title mb-0 h5"><%= t('education.program.main_informations') %></h2>
      </div>
      <div class="card-body">
        <h3 class="h5"><%= Education::Program.human_attribute_name('name') %></h3>
        <%= @program.name %>
        <h3 class="h5 mt-4"><%= Education::Program.human_attribute_name('level') %></h3>
        <%= @program.level_i18n %>
        <h3 class="h5 mt-4"><%= Education::Program.human_attribute_name('capacity') %></h3>
        <%= @program.capacity %>
        <h3 class="h5 mt-4"><%= Education::Program.human_attribute_name('ects') %></h3>
        <%= @program.ects %>
        <h3 class="h5 mt-4"><%= Education::Program.human_attribute_name('continuing') %></h3>
        <%= t @program.continuing %>
        <% if @program.schools.any? %>
          <h3 class="h5 mt-4"><%= Education::Program.human_attribute_name('schools') %></h3>
          <ul class="list-unstyled">
            <% @program.schools.ordered.each do |school| %>
              <li><%= link_to_if can?(:read, school), school, [:admin, school] %></li>
            <% end %>
          </ul>
        <% end %>
      </div>
    </div>
    <% if @program.featured_image.attached? && @program.featured_image.variable? %>
      <div class="card flex-fill w-100">
        <div class="card-header">
          <h5 class="card-title mb-0"><%= t('activerecord.attributes.education/program.featured_image') %></h5>
        </div>
        <div class="card-body">
          <%= image_tag @program.featured_image.variant(resize: '600'), class: 'img-fluid mb-3' %><br>
        </div>
      </div>
    <% end %>
  </div>
  <div class="col-md-9">
    <div class="card flex-fill w-100">
      <div class="card-header">
        <h5 class="card-title mb-0"><%= t('education.program.useful_informations') %></h5>
      </div>
      <div class="card-body">
        <%= render 'admin/application/property/text', object: @program, property: :description %>
        <% [
              :registration,
              :pricing,
              :duration,
              :contacts,
              :accessibility,
              :other
            ].each_with_index do |property, index| %>
            <%= render 'admin/application/property/text', object: @program, property: property %>
        <% end %>
      </div>
    </div>
    <div class="card flex-fill w-100">
      <div class="card-header">
        <h5 class="card-title mb-0"><%= t('education.program.educational_informations') %></h5>
      </div>
      <div class="card-body">
        <%  [
        :objectives,
        :content,
        :prerequisites,
        :pedagogy,
        :evaluation,
        :opportunities,
        :results
        ].each do |property| %>
        <%= render 'admin/application/property/text', object: @program, property: property %>
        <% end %>
      </div>
    </div>

    <%= render 'admin/communication/blocks/list', about: @program %>

    <div class="card flex-fill w-100">
      <div class="card-header">
        <h5 class="card-title mb-0"><%= Education::Program.human_attribute_name('team') %></h5>
      </div>
      <div class="card-body">
        <%= render 'admin/education/programs/show/roles', roles: @roles %>
      </div>
      <div class="card-body">
        <%= render 'admin/education/programs/show/teachers', involvements: @teacher_involvements %>
      </div>
    </div>

    <% if @program.children.any? %>
      <div class="card flex-fill w-100">
        <div class="card-header">
          <h5 class="card-title mb-0"><%= Education::Program.model_name.human(count: 2) %></h5>
        </div>
        <%= render 'admin/education/programs/list', programs: @program.children %>
      </div>
    <% end %>
  </div>
</div>

<% content_for :preview do %>
  <%  [
        :registration,
        :pricing,
        :duration,
        :contacts,
        :accessibility,
        :other,
        :objectives,
        :content,
        :prerequisites,
        :pedagogy,
        :evaluation,
        :opportunities,
        :results
      ].each do |property| %>
    <%= @program.send(property).to_s %>
  <% end %>
<% end %>

<% content_for :action_bar_right do %>
  <%= preview_link %>
  <%= edit_link @program %>
<% end %>
